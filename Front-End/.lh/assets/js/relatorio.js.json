{
    "sourceFile": "assets/js/relatorio.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1716495472195,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1717010201334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,4 @@\n-// Função para carregar os dados de mão de obra e atualizar o HTML\r\n-var subPecas = [];\r\n-var materiais = [];\r\n-var maoDeObra = [];\r\n-\r\n function carregarDadosDaPeca(idPeca) {\r\n   fetch(\"http://localhost:8080/pecas/\" + idPeca)\r\n     .then((response) => {\r\n       if (!response.ok) {\r\n@@ -11,86 +6,92 @@\n       }\r\n       return response.json();\r\n     })\r\n     .then((data) => {\r\n-      const listaDeNomesDePecas = document.getElementById(\r\n-        \"listaDeNomesDePecas\"\r\n-      );\r\n-      const codigoPeca = document.getElementById(\r\n-        \"codigo\"\r\n-      );\r\n+      // Selecionar elementos do DOM\r\n+      const id = document.getElementById(\"id\");\r\n+      const listaDeNomesDePecas = document.getElementById(\"listaDeNomesDePecas\");\r\n+      const codigoPeca = document.getElementById(\"codigo\");\r\n+      const volumeTotal = document.getElementById(\"volumeTotal\");\r\n+      const custoDeProducao = document.getElementById(\"custoDeProducao\");\r\n+      const tempoDeUsinagem = document.getElementById(\"tempoDeUsinagem\");\r\n+      const pesoTarugo = document.getElementById(\"pesoTarugo\");\r\n+      const quantidadeDeCavaco = document.getElementById(\"quantidadeDeCavaco\");\r\n+      const valorDoCavaco = document.getElementById(\"valorDoCavaco\");\r\n+      const dataDeCriacao = document.getElementById(\"dataDeCriacao\");\r\n+      const maoDeObra = document.getElementById(\"maoDeObra\");\r\n+      const subPecas = document.getElementById(\"subPecas\");\r\n+      const maquina = document.getElementById(\"maquina\");\r\n+      const material = document.getElementById(\"material\");\r\n+      const quantidadeSubPecas = document.getElementById(\"quantidadeSubPecas\");\r\n \r\n-      const maoDeObra = document.getElementById(\r\n-        \"maoDeObra\"\r\n-      );\r\n+      // Preencher elementos com os dados recebidos\r\n+      id.innerHTML = data.id;\r\n+      listaDeNomesDePecas.innerHTML = data.nomeDaPeca;\r\n+      codigoPeca.innerHTML = data.codigo;\r\n+      volumeTotal.innerHTML = data.volumeTotal;\r\n+      custoDeProducao.innerHTML = data.custoDeProducao;\r\n+      tempoDeUsinagem.innerHTML = data.tempoDeUsinagem;\r\n+      quantidadeDeCavaco.innerHTML = data.quantidadeDeCavaco;\r\n+      pesoTarugo.innerHTML = data.pesoTarugo;\r\n+      valorDoCavaco.innerHTML = data.valorDoCavaco;\r\n \r\n-      const maquinaPeca = document.getElementById(\r\n-        \"maquina\"\r\n-      );\r\n+      // Formatar e exibir a data de criação\r\n+      const dataCriacao = new Date(data.dataDeCriacao);\r\n+      const dataFormatada = `${dataCriacao.getDate()}/${dataCriacao.getMonth() + 1}/${dataCriacao.getFullYear()}`;\r\n+      dataDeCriacao.innerHTML = dataFormatada;\r\n \r\n-      const materialPeca = document.getElementById(\r\n-        \"material\"\r\n-      );\r\n+      // Exibir sub-peças\r\n+      if (Array.isArray(data.subPecas) && data.subPecas.length > 0) {\r\n+        subPecas.innerHTML = data.subPecas\r\n+          .map((subPeca) => `<li>Nome: ${subPeca.nome}, Código: ${subPeca.id}</li>`)\r\n+          .join('');\r\n+        console.log(\"Sub-peças carregadas\");\r\n+        // Contar a quantidade de sub-peças e exibir na página\r\n+        if (quantidadeSubPecas) {\r\n+          quantidadeSubPecas.textContent = `${data.subPecas.length}`;\r\n+        } else {\r\n+          console.error(\"Elemento com id 'quantidadeSubPecas' não encontrado.\");\r\n+        }\r\n+      } else {\r\n+        subPecas.innerHTML = 'Nenhuma sub peça encontrada.';\r\n+      }\r\n \r\n-\r\n-      listaDeNomesDePecas.innerHTML = data.nomeDaPeca;\r\n-      codigoPeca.innerHTML = data.codigo;\r\n-\r\n+      // Exibir mãos de obra\r\n       if (Array.isArray(data.maosDeObra) && data.maosDeObra.length > 0) {\r\n         maoDeObra.innerHTML = data.maosDeObra\r\n-          .map((mao) => `<li>Profissional: ${mao.profissional}, Preço por Hora: ${mao.precoPorHora}</li>`)\r\n+          .map((mao) => `<li>Nome: ${mao.profissional}</li>`)\r\n           .join('');\r\n       } else {\r\n         maoDeObra.innerHTML = 'Nenhuma mão de obra encontrada.';\r\n       }\r\n \r\n-\r\n+      // Exibir máquinas\r\n       if (Array.isArray(data.maquina) && data.maquina.length > 0) {\r\n-        maquinaPeca.innerHTML = data.maquina\r\n-          .map((maquina) => `<li>Nome: ${maquina.nome}, Preço por Hora: ${maquina.precoPorHora}</li>`)\r\n+        maquina.innerHTML = data.maquina\r\n+          .map((maq) => `<li>Nome: ${maq.nome}</li>`)\r\n           .join('');\r\n       } else {\r\n-        maquinaPeca.innerHTML = 'Nenhuma máquina encontrada.';\r\n+        maquina.innerHTML = 'Nenhuma máquina encontrada.';\r\n       }\r\n \r\n-      if (data.material) {\r\n-        materialPeca.innerHTML = `Nome: ${data.material.nome}, Preço por Kg: ${data.material.precoPorKg}, Preço Cavaco: ${data.material.precoCavaco}`;\r\n+      // Exibir material\r\n+      if (data.material && data.material.nome) {\r\n+        material.innerHTML = `Nome: ${data.material.nome}`;\r\n       } else {\r\n-        materialPeca.innerHTML = 'Nenhum material encontrado.';\r\n+        material.innerHTML = 'Nenhum material encontrado.';\r\n       }\r\n     })\r\n     .catch((error) => console.error(\"Erro ao buscar nomes das peças:\", error));\r\n }\r\n \r\n // Função que será executada quando a página for carregada\r\n window.onload = function () {\r\n   if (window.location.search) {\r\n-    // Obtenha a URL atual\r\n+    // Obter a URL atual\r\n     var urlParams = new URLSearchParams(window.location.search);\r\n-\r\n-    // Obtenha o valor do parâmetro idPeca\r\n+    // Obter o valor do parâmetro idPeca\r\n     var idPeca = urlParams.get(\"idPeca\");\r\n-\r\n+    // Carregar os dados da peça correspondente\r\n     carregarDadosDaPeca(idPeca);\r\n   }\r\n };\r\n-\r\n-//  fetch('http://localhost:8080/pecas')\r\n-//    .then(response => response.json())\r\n-//    .then(data => {\r\n-//      const listaDeMateriais = document.getElementById('listaDePecas');\r\n-\r\n-//      data.forEach(peca => {\r\n-//        const option = document.createElement('option');\r\n-//        option.value = peca.codigo;\r\n-//        option.text = peca.nomeDaPeca;\r\n-//        option.value = peca.material;\r\n-//        option.value = peca.maosDeObra;\r\n-//        listaDeMateriais.appendChild(option);\r\n-//      });\r\n-//  })\r\n-//  .catch(error => console.error('Erro ao buscar dados das peças', error));\r\n-\r\n-// Exemplo: http://127.0.0.1:5500/relatorio.html?idPeca=4\r\n-\r\n-\r\n-\r\n"
                }
            ],
            "date": 1716495472195,
            "name": "Commit-0",
            "content": "// Função para carregar os dados de mão de obra e atualizar o HTML\r\nvar subPecas = [];\r\nvar materiais = [];\r\nvar maoDeObra = [];\r\n\r\nfunction carregarDadosDaPeca(idPeca) {\r\n  fetch(\"http://localhost:8080/pecas/\" + idPeca)\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(\"Network response was not ok \" + response.statusText);\r\n      }\r\n      return response.json();\r\n    })\r\n    .then((data) => {\r\n      const listaDeNomesDePecas = document.getElementById(\r\n        \"listaDeNomesDePecas\"\r\n      );\r\n      const codigoPeca = document.getElementById(\r\n        \"codigo\"\r\n      );\r\n\r\n      const maoDeObra = document.getElementById(\r\n        \"maoDeObra\"\r\n      );\r\n\r\n      const maquinaPeca = document.getElementById(\r\n        \"maquina\"\r\n      );\r\n\r\n      const materialPeca = document.getElementById(\r\n        \"material\"\r\n      );\r\n\r\n\r\n      listaDeNomesDePecas.innerHTML = data.nomeDaPeca;\r\n      codigoPeca.innerHTML = data.codigo;\r\n\r\n      if (Array.isArray(data.maosDeObra) && data.maosDeObra.length > 0) {\r\n        maoDeObra.innerHTML = data.maosDeObra\r\n          .map((mao) => `<li>Profissional: ${mao.profissional}, Preço por Hora: ${mao.precoPorHora}</li>`)\r\n          .join('');\r\n      } else {\r\n        maoDeObra.innerHTML = 'Nenhuma mão de obra encontrada.';\r\n      }\r\n\r\n\r\n      if (Array.isArray(data.maquina) && data.maquina.length > 0) {\r\n        maquinaPeca.innerHTML = data.maquina\r\n          .map((maquina) => `<li>Nome: ${maquina.nome}, Preço por Hora: ${maquina.precoPorHora}</li>`)\r\n          .join('');\r\n      } else {\r\n        maquinaPeca.innerHTML = 'Nenhuma máquina encontrada.';\r\n      }\r\n\r\n      if (data.material) {\r\n        materialPeca.innerHTML = `Nome: ${data.material.nome}, Preço por Kg: ${data.material.precoPorKg}, Preço Cavaco: ${data.material.precoCavaco}`;\r\n      } else {\r\n        materialPeca.innerHTML = 'Nenhum material encontrado.';\r\n      }\r\n    })\r\n    .catch((error) => console.error(\"Erro ao buscar nomes das peças:\", error));\r\n}\r\n\r\n// Função que será executada quando a página for carregada\r\nwindow.onload = function () {\r\n  if (window.location.search) {\r\n    // Obtenha a URL atual\r\n    var urlParams = new URLSearchParams(window.location.search);\r\n\r\n    // Obtenha o valor do parâmetro idPeca\r\n    var idPeca = urlParams.get(\"idPeca\");\r\n\r\n    carregarDadosDaPeca(idPeca);\r\n  }\r\n};\r\n\r\n//  fetch('http://localhost:8080/pecas')\r\n//    .then(response => response.json())\r\n//    .then(data => {\r\n//      const listaDeMateriais = document.getElementById('listaDePecas');\r\n\r\n//      data.forEach(peca => {\r\n//        const option = document.createElement('option');\r\n//        option.value = peca.codigo;\r\n//        option.text = peca.nomeDaPeca;\r\n//        option.value = peca.material;\r\n//        option.value = peca.maosDeObra;\r\n//        listaDeMateriais.appendChild(option);\r\n//      });\r\n//  })\r\n//  .catch(error => console.error('Erro ao buscar dados das peças', error));\r\n\r\n// Exemplo: http://127.0.0.1:5500/relatorio.html?idPeca=4\r\n\r\n\r\n\r\n"
        }
    ]
}