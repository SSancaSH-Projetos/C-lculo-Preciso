{
    "sourceFile": "assets/js/custos.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1716916929530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1716916929530,
            "name": "Commit-0",
            "content": "// Função para fazer uma requisição GET para a API e exibir os dados na tabela\r\nfunction fetchDataAndDisplay(url, tableId) {\r\n    fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => displayDataInTable(data, tableId))\r\n        .catch(error => {\r\n            console.error('Erro ao buscar dados:', error);\r\n        });\r\n}\r\n\r\nfunction handledeletar(idParaDeletar, tipoDelecao) {\r\n    console.log(idParaDeletar, tipoDelecao);\r\n    if (tipoDelecao == \"maquinas-table\") {\r\n        deletar(idParaDeletar, \"maquinas\");\r\n        window.location.reload();\r\n    } else if (tipoDelecao == \"materiais-table\") {\r\n        deletar(idParaDeletar, \"material\");\r\n        window.location.reload();\r\n    } else if (tipoDelecao == \"mao-de-obra-table\") {\r\n        deletar(idParaDeletar, \"maodeobra\");\r\n        window.location.reload();\r\n    }\r\n}\r\n\r\n\r\n// Função para exibir os dados na tabela\r\nfunction displayDataInTable(data, tableId) {\r\n    const tableBody = document.getElementById(tableId);\r\n    tableBody.innerHTML = '';\r\n\r\n    data.forEach(item => {\r\n        let rowData = '';\r\n        if (!item.precoCavaco) {\r\n            rowData = `\r\n                <td>${item.profissional || item.nome}</td>\r\n                <td>R$ ${(item.precoPorHora || 0).toFixed(2)}/h</td>\r\n            `;\r\n        } else {\r\n            rowData = `\r\n                <td>${item.nome}</td>\r\n                <td>R$${(item.precoPorKg || 0).toFixed(2)}/kg</td>\r\n                <td>R$${(item.precoCavaco || 0).toFixed(2)}</td>\r\n                <td>${(item.densidade || 0).toFixed(2)} kg/m<sup>3</sup></td>\r\n            `;\r\n        }\r\n        const row = document.createElement('tr');\r\n        row.innerHTML = rowData + `\r\n            <td>\r\n                <a class=\"button-edit-delete\"><i class=\"fa-solid fa-pencil\"></i></a>\r\n                <a onClick=\"handledeletar(${item.id},'${tableId}');\" class=\"button-edit-delete\"><i class=\"fa-solid fa-trash\"></i></a>\r\n            </td>\r\n        `;\r\n        tableBody.appendChild(row);\r\n    });\r\n}\r\n\r\n// Chamar os endpoints para carregar os dados das tabelas\r\nfetchDataAndDisplay('http://localhost:8080/material', 'materiais-table');\r\nfetchDataAndDisplay('http://localhost:8080/maodeobra', 'mao-de-obra-table');\r\nfetchDataAndDisplay('http://localhost:8080/maquinas', 'maquinas-table');\r\n\r\n// Função genérica para abrir um modal\r\nfunction abrirModal(modalId) {\r\n    var modal = document.getElementById(modalId);\r\n    modal.style.display = \"block\";\r\n}\r\n\r\n// Função genérica para fechar um modal\r\nfunction fecharModal(modalId) {\r\n    var modal = document.getElementById(modalId);\r\n    modal.style.display = \"none\";\r\n}\r\n\r\nfunction cadastrar(tipoItem) {\r\n\r\n    var formData;\r\n    var url;\r\n    var modalId;\r\n\r\n    if (tipoItem.includes(\"material\")) {\r\n        formData = {\r\n            nome: document.getElementById(\"nome\").value,\r\n            precoPorKg: parseFloat(document.getElementById(\"precoPorKg\").value),\r\n            precoCavaco: parseFloat(document.getElementById(\"precoCavaco\").value),\r\n            densidade: parseFloat(document.getElementById(\"densidade\").value),\r\n\r\n        };\r\n        url = \"http://localhost:8080/material\";\r\n        modalId = \"addMaterialModal\";\r\n        window.location.reload();\r\n    } else if (tipoItem.includes(\"maodeobra\")) {\r\n        formData = {\r\n            profissional: document.getElementById(\"profissional\").value,\r\n            precoPorHora: parseFloat(document.getElementById(\"valorPorHora\").value),\r\n        };\r\n        url = \"http://localhost:8080/maodeobra\";\r\n        modalId = \"addMaoDeObraModal\";\r\n        window.location.reload();\r\n    } else if (tipoItem.includes(\"maquinas\")) {\r\n        formData = {\r\n            nome: document.getElementById(\"nomeMaquina\").value,\r\n            precoPorHora: parseFloat(document.getElementById(\"valorOperacaoPorHora\").value),\r\n        };\r\n        url = \"http://localhost:8080/maquinas\";\r\n        modalId = \"addMaquinaModal\";\r\n        window.location.reload();\r\n    }\r\n\r\n    fetch(url, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(formData)\r\n    })\r\n        .then(function (response) {\r\n            if (!response.ok) {\r\n                throw new Error(\"Erro ao cadastrar item\");\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(function (data) {\r\n            console.log(\"Item cadastrado com sucesso:\", data);\r\n            fecharModal(modalId);\r\n            document.getElementById(modalId).reset();\r\n            \r\n        })\r\n        .catch(function (error) {\r\n            console.error(\"Erro:\", error);\r\n        });\r\n    window.location.reload();\r\n\r\n}\r\n\r\n\r\nfunction deletar(idParaDeletar, endpoint) {\r\n\r\n\r\n    var url = \"http://localhost:8080/\" + endpoint + \"/\" + idParaDeletar;\r\n\r\n    fetch(url, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: \"\"\r\n    })\r\n        .then(function (response) {\r\n            if (!response.ok) {\r\n                throw new Error(\"Erro ao deletar Item\");\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(function (data) {\r\n            console.log(\"Item deletado com sucesso\");\r\n        })\r\n        .catch(function (error) {\r\n            console.error(\"Erro:\", error);\r\n        });\r\n\r\n    window.location.reload();\r\n}\r\n\r\nfunction handleCadastrar(tipo) {\r\n    if (tipo == \"material\") {\r\n        cadastrar(\"material\");\r\n    } else if (tipo == \"maoDeObra\") {\r\n        cadastrar(\"maodeobra\");\r\n    } else if (tipo == \"maquina\") {\r\n        cadastrar(\"maquinas\");\r\n    }\r\n}\r\n\r\n\r\nfunction handlerAbrirModal(qualModal) {\r\n    console.log(qualModal);\r\n    if (qualModal == \"material\") {\r\n        abrirModal(\"addMaterialModal\");\r\n    } else if (qualModal == \"maoDeObra\") {\r\n        abrirModal(\"addMaoDeObraModal\");\r\n    } else if (qualModal == \"maquina\") {\r\n        abrirModal(\"addMaquinaModal\");\r\n    }\r\n\r\n}\r\n\r\nfunction handlerFecharModal(qualModal) {\r\n    console.log(qualModal);\r\n    if (qualModal == \"material\") {\r\n        fecharModal(\"addMaterialModal\");\r\n    } else if (qualModal == \"maoDeObra\") {\r\n        fecharModal(\"addMaoDeObraModal\");\r\n    } else if (qualModal == \"maquina\") {\r\n        fecharModal(\"addMaquinaModal\");\r\n    }\r\n\r\n}\r\n\r\n\r\n"
        }
    ]
}